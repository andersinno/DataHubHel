#!/bin/bash

endpoint_url="http://localhost:8000/cesva/v1/"
sensor_params="i=sensori&k=avain"

#timestamp=2019-10-15T12:23:30Z
#timestamp=$(TZ=UTC date +%Y-%m-%dT%H:%M:%SZ)  # 1s resolution
timestamp=$(TZ=UTC date +%Y-%m-%dT%H:%M:%S.%NZ)  # 1ns resolution
url="${endpoint_url}?${sensor_params}&t=${timestamp}"

data="n|041.5|o|1|u|0|b|56|p|1|m|45|s|046.6,0,0;048.4,0,0;047.4,0,0;043.3,0,0;039.9,0,0;039.8,0,0;039.4,0,0;040.5,0,0;040.4,0,0;040.4,0,0;040.8,0,0;040.1,0,0;040.2,0,0;040.1,0,0;039.7,0,0;040.3,0,0;039.9,0,0;040.1,0,0;040.1,0,0;039.8,0,0;040.0,0,0;040.1,0,0;041.0,0,0;045.3,0,0;044.4,0,0;040.1,0,0;040.0,0,0;040.0,0,0;040.0,0,0;040.0,0,0;039.5,0,0;039.9,0,0;040.1,0,0;039.9,0,0;040.4,0,0;040.5,0,0;040.5,0,0;040.4,0,0;041.6,0,0;041.5,0,0;044.2,0,0;040.3,0,0;039.9,0,0;039.9,0,0;040.1,0,0;039.9,0,0;039.9,0,0;039.5,0,0;040.1,0,0;040.0,0,0;039.8,0,0;040.1,0,0;039.9,0,0;042.5,0,0;043.4,0,0;041.3,0,0;040.5,0,0;040.0,0,0;040.2,0,0;041.6,0,0"

curl -v "$url" -H 'Content-Type: text/plain' -d "$data"
